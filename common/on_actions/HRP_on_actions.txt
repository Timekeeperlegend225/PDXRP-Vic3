on_monthly_pulse= {
    on_actions = {
    	america_migration_check 
	    power_bloc_leader_rank_check
    }
}

america_migration_check = {
    effect = {
        every_country = {
            limit = {
                OR = {
                    country_is_in_north_america = yes
					country_is_in_central_america = yes
                    country_is_in_south_america = yes
                }    
                country_rank = rank_value:great_power   
                NOT = { has_modifier = american_migration_gp_attraction }
            }
            add_modifier = american_migration_gp_attraction
            remove_modifier =  american_migration_mp_attraction
        }
        every_country = {
            limit = {
                OR = {
                    country_is_in_north_america = yes
					country_is_in_central_america = yes
                    country_is_in_south_america = yes
                }    
                country_rank = rank_value:major_power     
                NOT = { has_modifier = american_migration_mp_attraction }
            }
            add_modifier = american_migration_mp_attraction
            remove_modifier =  american_migration_gp_attraction
        }
        every_country = {
            limit = {
                OR = {
                    country_is_in_north_america = yes
					country_is_in_central_america = yes
                    country_is_in_south_america = yes
                }    
                OR = {
                    country_rank = rank_value:minor_power
                    country_rank = rank_value:insignificant_power
                }   
                OR = {
                    has_modifier = american_migration_mp_attraction
                    has_modifier =  american_migration_gp_attraction
                }
            }
            remove_modifier =  american_migration_mp_attraction
            remove_modifier =  american_migration_gp_attraction
        }
    }
}

power_bloc_leader_rank_check = {
    effect = {
        every_power_bloc = {
            if = {
                limit = {
			        power_bloc_leader = { country_rank = rank_value:major_power}
                    NOT = {has_modifier = power_bloc_led_by_major}
                }
                add_modifier = power_bloc_led_by_major
                remove_modifier  = power_bloc_led_by_minor
            }
            else_if = {
                limit = {
                    power_bloc_leader = { country_rank = rank_value:minor_power}
                    NOT = {has_modifier = power_bloc_led_by_minor}
                }
                add_modifier = power_bloc_led_by_minor
                remove_modifier  = power_bloc_led_by_major
            }
            else_if = {
                limit = {
                    power_bloc_leader = { country_rank = rank_value:great_power}
                    OR = {
                    has_modifier = power_bloc_led_by_minor
                    has_modifier = power_bloc_led_by_major
                    }
                }
                remove_modifier  = power_bloc_led_by_major
                remove_modifier  = power_bloc_led_by_minor
            }
        }
    }
}