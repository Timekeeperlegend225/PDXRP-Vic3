on_yearly_pulse= {
    on_actions = {
    	america_migration_check 
    }
}

america_migration_check = {
    effect = {
        every_country = {
            limit = {
                OR = {
                    country_is_in_north_america = yes
					country_is_in_central_america = yes
                    country_is_in_south_america = yes
                }    
                country_rank = rank_value:great_power   
                NOT = { has_modifier = american_migration_gp_attraction }
            }
            add_modifier = american_migration_gp_attraction
            remove_modifier =  american_migration_mp_attraction
        }
        every_country = {
            limit = {
                OR = {
                    country_is_in_north_america = yes
					country_is_in_central_america = yes
                    country_is_in_south_america = yes
                }    
                country_rank = rank_value:major_power     
                NOT = { has_modifier = american_migration_mp_attraction }
            }
            add_modifier = american_migration_mp_attraction
            remove_modifier =  american_migration_gp_attraction
        }
        every_country = {
            limit = {
                OR = {
                    country_is_in_north_america = yes
					country_is_in_central_america = yes
                    country_is_in_south_america = yes
                }    
                OR = {
                    country_rank = rank_value:minor_power
                    country_rank = rank_value:insignificant_power
                }   
                OR = {
                    has_modifier = american_migration_mp_attraction
                    has_modifier =  american_migration_gp_attraction
                }
            }
            remove_modifier =  american_migration_mp_attraction
            remove_modifier =  american_migration_gp_attraction
        }
    }
}
